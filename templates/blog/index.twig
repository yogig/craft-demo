{% extends "_layout" %}

{% block title %}Blog - {{ siteName }}{% endblock %}

{% block content %}
    <h1 style="margin-bottom: 40px;">Blog</h1>

    {% set blogEntries = craft.entries()
        .section('blog')
        .orderBy('postDate DESC')
        .all() %}

    {% if blogEntries|length %}
        <div class="blog-grid">
            {% for entry in blogEntries %}
                <div class="blog-card">
                    {% set featuredImage = entry.featuredImage.one() %}
                    {% if featuredImage %}
                        <img src="{{ featuredImage.url }}"
                             alt="{{ featuredImage.title }}">
                    {% else %}
                        <img src="https://via.placeholder.com/400x200/3498db/ffffff?text={{ entry.title|url_encode }}"
                             alt="{{ entry.title }}">
                    {% endif %}

                    <div class="blog-card-content">
                        {% if entry.featuredPost %}
                            <span style="background: #e74c3c; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; display: inline-block; margin-bottom: 10px;">‚≠ê FEATURED</span>
                        {% endif %}

                        <h2><a href="{{ entry.url }}">{{ entry.title }}</a></h2>

                        {% if entry.summary %}
                            <p class="summary">{{ entry.summary }}</p>
                        {% endif %}

                        <div style="display: flex; gap: 15px; margin: 15px 0; font-size: 14px; color: #666;">
                            <span>üìÖ {{ entry.postDate|date('M d, Y') }}</span>
                            {% if entry.readingTime %}
                                <span>‚è±Ô∏è {{ entry.readingTime }} min read</span>
                            {% endif %}
                        </div>

                        {% if entry.categories|length %}
                            <div style="margin: 15px 0;">
                                {% for category in entry.categories.all() %}
                                    <span style="background: #ecf0f1; padding: 4px 10px; border-radius: 4px; font-size: 12px; margin-right: 5px; display: inline-block; margin-bottom: 5px;">
                                        {{ category.title }}
                                    </span>
                                {% endfor %}
                            </div>
                        {% endif %}

                        <a href="{{ entry.url }}" class="btn">Read More ‚Üí</a>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p style="color: #666; text-align: center; padding: 40px; background: #f9f9f9; border-radius: 8px;">
            No blog posts yet. <a href="/admin/entries/blog/new" style="color: #3498db;">Create your first post!</a>
        </p>
    {% endif %}
{% endblock %}